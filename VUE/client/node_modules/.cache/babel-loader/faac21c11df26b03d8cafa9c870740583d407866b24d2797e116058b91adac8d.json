{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\n//import {character,readFile} from \"@/assets/js/excel\";\n//import {delay} from \"@/assets/js/utils\";\n//import XLSX from \"xlsx\";\nimport * as echarts from \"echarts\";\nconst d3 = require('d3-dsv');\nexport default {\n  data() {\n    return {\n      clusterlist: [{\n        name: \"cc-cc408-hya\",\n        id: 1\n      }, {\n        name: \"cc-cc553-interestPrice\",\n        id: 2\n      }],\n      myChart: {},\n      xData: [],\n      yData: [],\n      myChartStyle: {\n        float: \"left\",\n        width: \"100%\",\n        height: \"400px\"\n      },\n      flag: 0\n    };\n  },\n  mounted() {\n    this.initEcharts();\n  },\n  watch: {\n    flag: function () {\n      this.initEcharts();\n    }\n  },\n  methods: {\n    initEcharts() {\n      const option = {\n        dataZoom: [{\n          type: 'inside',\n          show: true,\n          height: 20,\n          left: '10%',\n          right: '10%',\n          bottom: '2%',\n          start: 80,\n          end: 100,\n          filterMode: \"filter\",\n          xAxisIndex: [0],\n          textStyle: {\n            color: '#d4ffff',\n            fontSize: 11\n          }\n        }],\n        xAxis: {\n          data: this.xData\n          //type:\"time\"\n        },\n\n        yAxis: {},\n        series: [{\n          data: this.yData,\n          type: \"line\"\n        }]\n      };\n      this.myChart = echarts.init(document.getElementById(\"mychart\"));\n      this.myChart.setOption(option);\n      window.addEventListener(\"resize\", () => {\n        this.myChart.resize();\n      });\n    },\n    ChooseCluster(event) {\n      console.log(event.target.value);\n      if (event.target.value == \"cc-cc408-hya\") {\n        axios.get(\"cc-cc408-hya/cc-cc408-hya_active_shardsr.csv\").then(res => {\n          var value = d3.csvParse(res.data);\n          this.xData = [];\n          this.yData = [];\n          for (var i = 0; i < value.length; i++) {\n            this.xData.push(Number((value[i].timestamp - value[0].timestamp) / 60));\n            this.yData.push(Number(value[i].health_active_shards));\n            this.flag = 1;\n          }\n          console.log(this.xData);\n          console.log(this.yData);\n        });\n        //this.xData=[1,2,3,4,5,6]\n        //this.yData=[12,13,14,15,16]\n      } else {\n        axios.get(\"cc-cc553/cc-cc553-interestPrice==elasticsearch_cluster_health_active_shards==cluster.csv\").then(res => {\n          var value = d3.csvParse(res.data);\n          this.xData = [];\n          this.yData = [];\n          for (var i = 0; i < value.length; i++) {\n            this.xData.push(Number((value[i].timestamp - value[0].timestamp) / 60));\n            this.yData.push(Number(value[i].health_active_shards));\n            this.flag = 2;\n          }\n          console.log(this.xData);\n          console.log(this.yData);\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","echarts","d3","require","data","clusterlist","name","id","myChart","xData","yData","myChartStyle","float","width","height","flag","mounted","initEcharts","watch","methods","option","dataZoom","type","show","left","right","bottom","start","end","filterMode","xAxisIndex","textStyle","color","fontSize","xAxis","yAxis","series","init","document","getElementById","setOption","window","addEventListener","resize","ChooseCluster","event","console","log","target","value","get","then","res","csvParse","i","length","push","Number","timestamp","health_active_shards"],"sources":["E:\\VUE\\frontend\\src\\views\\HomeView.vue"],"sourcesContent":["<template>\n<div>\n<select v-model=\"clusterchoose\" style=\"width:200px;height:30px;margin-top:5px;margin-bottom:5px;margin-left:10px\"\n            @change=\"ChooseCluster($event)\">\n  <option value=\"\">请选择所要展示集群</option>\n  <option v-for=\"item in clusterlist\" v-bind:key=\"item.id\" v-text=\"item.name\"></option>\n</select>\n  <div class=\"echart\" id=\"mychart\" :style=\"myChartStyle\"></div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n//import {character,readFile} from \"@/assets/js/excel\";\n//import {delay} from \"@/assets/js/utils\";\n//import XLSX from \"xlsx\";\nimport * as echarts from \"echarts\"\nconst d3=require('d3-dsv')\nexport default {\n  data(){\n    return{\n      clusterlist:[{name:\"cc-cc408-hya\",id:1},{name:\"cc-cc553-interestPrice\",id:2}],\n      myChart:{},\n      xData:[],\n      yData:[],\n      myChartStyle:{float: \"left\", width: \"100%\", height: \"400px\"},\n      flag:0\n      }\n    },\n  mounted(){\n    this.initEcharts();\n  },\n  watch:{\n    flag:function()\n    {\n      this.initEcharts();\n    }\n  },\n  methods:{\n    initEcharts()\n    {\n      const option={\n        dataZoom: [{\n        type: 'inside',\n        show: true,\n        height: 20,\n        left: '10%',\n        right: '10%',\n        bottom: '2%',\n        start:80,\n        end: 100,\n        filterMode:\"filter\",\n        xAxisIndex: [0],\n        textStyle: {\n          color: '#d4ffff',\n          fontSize: 11\n        }\n    }],\n        xAxis:{\n          data:this.xData\n          //type:\"time\"\n        },\n        yAxis:{},\n        series:[\n          {\n            data:this.yData,\n            type:\"line\"\n          }\n        ]\n      };\n      this.myChart = echarts.init(document.getElementById(\"mychart\"));\n      this.myChart.setOption(option);\n      window.addEventListener(\"resize\",()=>{\n        this.myChart.resize();\n      })\n    },\n     ChooseCluster(event){\n      console.log(event.target.value)\n        if(event.target.value==\"cc-cc408-hya\")\n        {\n          axios.get(\"cc-cc408-hya/cc-cc408-hya_active_shardsr.csv\")\n            .then(res=>{\n              var value=d3.csvParse(res.data)\n              this.xData=[]\n              this.yData=[]\n              for(var i=0;i<value.length;i++)\n              {\n                this.xData.push(Number((value[i].timestamp-value[0].timestamp)/60))\n                this.yData.push(Number(value[i].health_active_shards))\n                this.flag=1\n              }\n              console.log(this.xData)\n              console.log(this.yData)\n            })\n          //this.xData=[1,2,3,4,5,6]\n          //this.yData=[12,13,14,15,16]\n        }\n        else{\n          axios.get(\"cc-cc553/cc-cc553-interestPrice==elasticsearch_cluster_health_active_shards==cluster.csv\")\n            .then(res=>{\n              var value=d3.csvParse(res.data)\n              this.xData=[]\n              this.yData=[]\n              for(var i=0;i<value.length;i++)\n              {\n                this.xData.push(Number((value[i].timestamp-value[0].timestamp)/60))\n                this.yData.push(Number(value[i].health_active_shards))\n                this.flag=2\n              }\n              console.log(this.xData)\n              console.log(this.yData)\n            })\n        }\n      }\n  }\n  \n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n</style>\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}